{"author":{"id":"a46dbc32f4bff58987bcbb31d1c10d2c11ce5c6c6ef1de92b086459ddff5747e"},"ops":[{"type":1,"timestamp":1685961105,"nonce":"77/GmyeHqCqr24qHQMc/stedysw=","metadata":{"github-id":"I_kwDOJlAk-M5nzNkc","github-url":"https://github.com/zhukovgreen/pytest-when/issues/10","origin":"github"},"title":"Mocking method with no arguments","message":"I have a code where I would like to mock function with no parameters. It seems that when is expecting at least one argument, but never zero.\n\nFollowing code is heavily redacted for bare minimum.\n\nPython version: 3.8.16\npytest-when version: 1.0.8\npytest version: 7.3.1\n \nThe method looks like:\n```python\n# some redacted package\n\ndef super_cool_function():\n    return 1\n```\n\nIn a test, I would like to create mocking object for this function.\n```python\nfrom some_package import super_redacted_package as c\n\ndef test_1(when: When):\n    client_mock = MagicMock()\n    when(c, \"super_cool_function\").then_return(client_mock)\n    ...\n\n# AttributeError: 'When' object has no attribute 'args'\n\ndef test_2(when: When):\n    client_mock = MagicMock()\n    when(c, \"super_cool_function\").called_with(when.markers.any).then_return(client_mock)\n    ...\n\ndef test_3(when: When):\n    client_mock = MagicMock()\n    when(c, \"super_cool_function\").called_with().then_return(client_mock)\n    ...\n\n# IndexError: tuple index out of range - when.py line 304\n```","files":null}]}